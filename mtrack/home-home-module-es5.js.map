{"version":3,"sources":["./src/app/home/home.page.html","./src/app/home/home.module.ts","./src/app/home/home.page.scss","./src/app/home/home.page.ts"],"names":[],"mappings":"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","file":"home-home-module-es5.js","sourcesContent":["module.exports = \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-menu-button></ion-menu-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title>\\r\\n      PDF Download\\r\\n    </ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <ion-item>\\r\\n    <ion-input [(ngModel)]=\\\"downloadUrl\\\"></ion-input>\\r\\n  </ion-item>\\r\\n  <ion-button (click)=\\\"downloadFile()\\\" [disabled]=\\\"downloadUrl == ''\\\" expand=\\\"full\\\">\\r\\n    <ion-icon name=\\\"download\\\" slot=\\\"start\\\"></ion-icon> Download from url\\r\\n  </ion-button>\\r\\n\\r\\n  <ion-row>\\r\\n    <ion-col size=4>\\r\\n      <ion-button (click)=\\\"downloadFile(pdfUrl)\\\" expand=\\\"full\\\">\\r\\n        <ion-icon name=\\\"download\\\" slot=\\\"start\\\"></ion-icon> pdf\\r\\n      </ion-button>\\r\\n      <ion-button (click)=\\\"downloadFromHtml(pdfUrl)\\\" expand=\\\"full\\\">\\r\\n        <ion-icon name=\\\"download\\\" slot=\\\"start\\\"></ion-icon> PDF HTML\\r\\n      </ion-button>\\r\\n    </ion-col>\\r\\n  </ion-row>\\r\\n  <ion-row id=\\\"parentdiv\\\">\\r\\n    jkdscjd\\r\\n  </ion-row>\\r\\n</ion-content>\"","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { RouterModule } from '@angular/router';\r\n\r\nimport { HomePage } from './home.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    RouterModule.forChild([\r\n      {\r\n        path: '',\r\n        component: HomePage\r\n      }\r\n    ])\r\n  ],\r\n  declarations: [HomePage]\r\n})\r\nexport class HomePageModule {}\r\n","module.exports = \".welcome-card img {\\n  max-height: 35vh;\\n  overflow: hidden;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvaG9tZS9EOlxcQVRTLUZyb250ZW5kLVdlYi1HaXQvc3JjXFxhcHBcXGhvbWVcXGhvbWUucGFnZS5zY3NzIiwic3JjL2FwcC9ob21lL2hvbWUucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsZ0JBQUE7RUFDQSxnQkFBQTtBQ0NGIiwiZmlsZSI6InNyYy9hcHAvaG9tZS9ob21lLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi53ZWxjb21lLWNhcmQgaW1nIHtcclxuICBtYXgtaGVpZ2h0OiAzNXZoO1xyXG4gIG92ZXJmbG93OiBoaWRkZW47XHJcbn1cclxuIiwiLndlbGNvbWUtY2FyZCBpbWcge1xuICBtYXgtaGVpZ2h0OiAzNXZoO1xuICBvdmVyZmxvdzogaGlkZGVuO1xufSJdfQ== */\"","import { HttpEventType } from '@angular/common/http';\r\nimport { Component } from '@angular/core';\r\nimport { Plugins, FilesystemDirectory } from '@capacitor/core';\r\nimport { FileOpener } from '@ionic-native/file-opener/ngx';\r\nimport * as jsPDF from 'jspdf';\r\nimport html2canvas from 'html2canvas';\r\n\r\nimport { AjaxService } from '../services/ajax.service';\r\nimport { CommonService } from '../services/common.service';\r\nconst { Filesystem, Storage } = Plugins;\r\n\r\nexport const File_Key = 'files';\r\n\r\n@Component({\r\n  selector: 'app-home',\r\n  templateUrl: 'home.page.html',\r\n  styleUrls: ['home.page.scss'],\r\n})\r\nexport class HomePage {\r\n  myFiles = []\r\n  downloadUrl: any;\r\n  downloadprogress: number;\r\n  constructor(\r\n    private fileOpener: FileOpener,\r\n    private ajaxServices: AjaxService,\r\n    private commonService: CommonService,\r\n  ) {\r\n    this.loadFile();\r\n  }\r\n  pdfUrl = \"https://file-examples-com.github.io/uploads/2017/10/file-example_PDF_500_kB.pdf\"\r\n\r\n  async loadFile() {\r\n    const videoList = await Storage.get({\r\n      key: File_Key\r\n    })\r\n    this.myFiles = JSON.parse(videoList.value) || [];\r\n  }\r\n\r\n\r\n\r\n  private getMimetype(name) {\r\n    if (name.indexOf('pdf') >= 0) {\r\n      return 'application/pdf'\r\n    } else if (name.indexOf('png') >= 0) {\r\n      return 'image/png'\r\n    } else if (name.indexOf('mp4') >= 0) {\r\n      return 'video/png'\r\n    }\r\n  }\r\n\r\n  downloadFile(url?) {\r\n\r\n    this.downloadUrl = url ? url : this.downloadUrl\r\n    this.ajaxServices.ajaxGetFile(this.downloadUrl)\r\n      .subscribe(async event => {\r\n        if (event.type === HttpEventType.DownloadProgress) {\r\n          this.downloadprogress = Math.round((100 * event.loaded) / event.total)\r\n        } else if (event.type === HttpEventType.Response) {\r\n          this.downloadprogress = 0;\r\n          const name = url.substr(url.lastIndexOf('/') + 1);\r\n          // const base64 = await this.commonService.convertBlobToBase64(event.body) as string;\r\n          const base64 = \"data:text/html;charset=UTF-8,<h4 style=%22color: %23000; %22>Hello world!</h4>\"\r\n\r\n          const savedFile = await Filesystem.writeFile({\r\n            path: name,\r\n            data: base64,\r\n            directory: FilesystemDirectory.Documents\r\n          })\r\n          console.log('Saved:' + savedFile.uri)\r\n          const path = savedFile.uri;\r\n          const mimeType = this.getMimetype(name)\r\n\r\n          this.fileOpener.open(path, mimeType)\r\n            .then(() => console.log('file open'))\r\n            .catch(err => console.log('Error', err))\r\n\r\n          this.myFiles.unshift(path);\r\n\r\n          Storage.set({\r\n            key: File_Key,\r\n            value: JSON.stringify(this.myFiles)\r\n          })\r\n        }\r\n      })\r\n  }\r\n\r\n  downloadFromHtml() {\r\n    // parentdiv is the html element which has to be converted to PDF\r\n    html2canvas(document.getElementById(\"parentdiv\")).then(canvas => {\r\n\r\n      var pdf = new jsPDF.jsPDF('p', 'pt', [canvas.width, canvas.height]);\r\n\r\n      var imgData = canvas.toDataURL(\"image/jpeg\", 1.0);\r\n      pdf.addImage(imgData, 0, 0, canvas.width, canvas.height);\r\n      pdf.save('converteddoc.pdf');\r\n      // var doc = new jsPDF('p', 'mm', 'a4');\r\n      // var specialElementHandlers = {\r\n      //   '#editor': function (element, renderer) {\r\n      //     return true;\r\n      //   }\r\n      // };\r\n\r\n      //   var ffg = \"<html><head><title>Report Downloading</title> <meta http-equiv='Content-Type' content='text/html; charset=UTF-8'/></head><style>table {border-collapse: collapse;width: 100% ;font-size: 11px;}th {background-color: #CCCCCC }td {background-color: white;}th, td {text-align: left;padding: 8pxborder: 1px solid black;}tr:nth-child(even){background-color: #f2f2f2 !important}</style><body style='font-family: KacstOffice,tahoma,arial,verdana,sans-serif ;font-size: 11px  !important'><br/><br/><br/><table width='100%' border='1'><thead><tr><th>ع ع</th><th>بدأ</th><th>موقع البدأ</th><th>انتهي</th><th>موقع الانتهاء</th><th>مدة التشغيل</th> <th>مدة التوقف</th> <th>مدة عمل المحرك بدونحركة</th><th>مدة السحب</th><th>عداد المسافة</th><th>Maximum Speed</th><th>اسم السائق</th></tr></thead></table></body></html>\"\r\n      //   doc.text(30,30,\"s\")\r\n      //   doc.save('sample-file.pdf');\r\n      // }\r\n    }\r\n    )};\r\n    }\r\n"],"sourceRoot":""}